<!DOCTYPE html>
<html>
<head>
	<title>Social Traveler</title>
	<meta charset="utf-8">
	<link rel="shortcut icon" href="../images/favicon.ico" />

	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<meta name="description" content="Social Traveler - an online platform for trip collaboration">

	<link href='http://fonts.googleapis.com/css?family=Oleo+Script' rel='stylesheet' type='text/css'>

	<link href="../css/bootstrap.min.css" rel="stylesheet">
	<link href="../css/bootstrap-responsive.min.css" rel="stylesheet">
	<link href="../css/style.css" rel="stylesheet">

	<script src="http://www.parsecdn.com/js/parse-1.2.7.min.js"></script>
	
</head>

<body>
<script>
Parse.initialize("BRih15D1JVSqGQG4ZqN7mC8xI1zdCaj19P7s1jN5", "qXPbI5HE86xRHRirKIoBclQknsBOPzXJLTmoovPX");
</script>

<script>
  	window.fbAsyncInit = function() {
	  	Parse.FacebookUtils.init({
	  		appId: '172708956215256',
	  		channelUrl: '//hidden-eyrie-6529.herokuapp.com/channel.html',
		  	status: true,
		  	cookie: true,
		  	xfbml: true
		});
		
		FB.getLoginStatus(function(response) {
			if (response.status === 'connected') {
				console.log("sup");
				loadFriends();
			} else {
				FB.login(function(response) {
					if (response.authResponse) {
						loadFriends();
					} else {
						console.log("this is dumb");
					}
				});
			}
		});
	};


  	(function(d, s, id){
  	var js, fjs = d.getElementsByTagName(s)[0];
  	if (d.getElementById(id)) {return;}
  	js = d.createElement(s); js.id = id;
  	js.src = "//connect.facebook.net/en_US/all.js";
  	fjs.parentNode.insertBefore(js, fjs);
  	}(document, 'script', 'facebook-jssdk'));

  	function loadFriends() {
  		FB.api('/me/friends', function(response) {
  			var divContainer = document.getElementById("friends-list");
  			for (i = 0; i < response.data.length; i++) {
  				var friendDiv = document.createElement("div");
  				friendDiv.className = "friend";
  				var element = document.createElement("div");
  				var imgElement = document.createElement("img");
  				imgElement.src = "https://graph.facebook.com/"+response.data[i].id+"/picture?type=square";
  				element.innerHTML = response.data[i].name;
  				friendDiv.appendChild(imgElement);
  				friendDiv.appendChild(element);
  				divContainer.appendChild(friendDiv);
  			}
  		});
  	}
</script>

	<!-- Navbar
    ================================================== -->
<div class="navbar">
 	<div id="logo"></div>

 	<ul id="main-menu-right">
 		<li id="user" class="notlast">Hello, User!</li>
 		<li id="settings" class="pic-icon notlast"><a href="../pages/settings.html"><img src="../img/settings.png" alt="settings"/></a></li>
 		<li id="create-trip" class="pic-icon plus notlast"><a href="../pages/create_trip.html"><img src="../img/plus2.png" alt="create a trip"/></a></li>
 		<li id="logout">logout</li>
 	</ul>
 </div>

<div id="wrapper">
	<div class="page-wrapper">
		<h3>Invite Your Friends!</h3>
		<div id="friends-list">
		</div>
 	</div>

 	<a href="./home.html">
 		<button>Invite Friends!</button>
 	</a>
 	<a href="./home.html">
 		<button>Skip This Step</button>
 	</a>
</div>
     <!-- javascript
    ================================================== -->
	<script src="../js/jquery-1.9.0.js"></script>
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
    <script src="../js/jquery.smooth-scroll.min.js"></script>
    <script src="../js/bootstrap.min.js"></script>
	<script src="../js/script.js"></script>
</body>
 </html>
